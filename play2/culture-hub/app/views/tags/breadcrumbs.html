#{if views.Breadcrumbs.crumble(_params, request, _theme).size() > 1}
<div class="breadcrumb">
    <ul>
    #{list views.Breadcrumbs.crumble(_params, request, _theme), as: 'c'}
        <li>
        #{if c._2 == views.Breadcrumbs.crumble(_params, request, _theme).length() -1 && views.Breadcrumbs.crumble(_params, request, _theme).length() > 1}
            ${views.Helpers.shorten(c._1._2, 50)}
        #{/if}
        #{if c._2 < views.Breadcrumbs.crumble(_params, request, _theme).length() -1 && views.Breadcrumbs.crumble(_params, request, _theme).length() > 1}
            #{if c._1._1 == "NOLINK"}
            ${views.Helpers.shorten(c._1._2, 50)}
            #{/}
            #{else}
            <a href="${c._1._1}"><span>${views.Helpers.shorten(c._1._2, 50)}</span></a>
            #{/else}
        #{/if}
        #{if c._2 < views.Breadcrumbs.crumble(_params, request, _theme).length() - 1 && views.Breadcrumbs.crumble(_params, request, _theme).length() == 1}
          #{if c._1._1 == "NOLINK"}
            ${views.Helpers.shorten(c._1._2, 50)}
            #{/}
            #{else}
            <a href="${c._1._1}"><span>${views.Helpers.shorten(c._1._2, 50)}</span></a>
            #{/else}
          #{/if}
        </li>
    #{/list}
    #{if _queryCrumbs}
        #{list _queryCrumbs.getBreadcrumbs(), as: 'crumb'}
            #{ifnot crumb_isLast}
                *{<li><a href="@{Search.index()}?${crumb.href()}"><span>${crumb.value().shorten(50)}</span></a></li>}*
           #{/ifnot}
            #{else}
                <li><span>${crumb.value()}</span></li>
            #{/else}
        #{/list}
    #{/if}
    </ul>
</div>
#{/if}

