#{extends 'header.html' /}
#{set title:'Welcome' /}
#{set bodyId:'home' /}
#{set 'moreCss'}
     <link rel="stylesheet" type="text/css" media="screen" href="@{'/public/themes/common/stylesheets/carousel.css'}"/>
#{/set}
#{set 'moreScripts'}
     <script src='${views.context.package.themePath("javascripts/index.js")}' type='text/javascript'></script>
#{/set}


<div class="messages-container">
    <div class="messages">
        #{if flash.registrationSuccess}
        <p class="success">
            Your account was successfully created! An email has been sent to ${flash.registrationSuccess} for activation
        </p>
        #{/}
        #{if flash.registrationError}
        <p class="error">
            Error creating your account, please try again. The cause of the error is: "${flash.registrationError}"
        </p>
        #{/}
        #{if flash.activation && flash.activation == "true"}
        <p class="success">
            Your account is now active!
        </p>
        #{/}
        #{if flash.activation && flash.activation == "false"}
        <p class="error">
            Error activating your account.
        </p>
        #{/}
        #{if flash.resetPasswordEmail && flash.resetPasswordEmail == "true"}
        <p class="success">
            An e-mail has been sent to you with a link to reset your password
        </p>
        #{/}
        #{if flash.resetPasswordError}
        <p class="error">
            Error resetting your password: ${flash.resetPasswordError}
        </p>
        #{/}
        #{if flash.resetPasswordSuccess && flash.resetPasswordSuccess == "true"}
        <p class="success">
            Your password has been successfully changed
        </p>
        #{/}
    </div>
</div>

#{if recentObjects.size() > 0}

<h1><span>Recent Objects</span></h1>
    <ul id="carousel-1" class="jcarousel-skin-nassau">
    #{list recentObjects, as: 'o'}
        <li>
            <a href="/${o.userName}/object/${o.id}">
                <img src='${views.context.package.thumbnailUrl(o.thumbnail)}' width="150" alt="${o.title}"/>
                <span>${o.title}</span>
            </a>
        </li>
    #{/list}
   </ul>
<a href="/objects" class="more">More objects</a>
#{/if}

<div class="line">
#{if recentCollections.size() > 0}



    <div class="collections-container items unit size1of2">
        <h2><span>Recent Collections</span></h2>
        #{list recentCollections, as: 'c'}
        <div class="item one-col">
            <div class="media medium">
                <img src='${views.context.package.thumbnailUrl(c.thumbnail)}' width="100" alt="${c.name}"/>
            </div>
            <div class="metadata">
                <div class="hd"></div>
                <div class="bd">
                    <h4><a href="/${c.userName}/collection/${c.id}">${c.name}</a></h4>
                    <span class="detail">${views.context.package.fullName(c.userName)}</span>
                    <span class="detail">${views.context.package.niceTime(c.TS_update)}</span>
                </div>
             </div>
        </div>
        #{/list}
    </div>
    #{/if}

    #{if recentStories.size() > 0}


    <div class="stories-container unit size1of2">
        <h2><span>Recent Stories</span></h2>
      #{list recentStories, as: 's'}
        <div class="item one-col">
            <div class="media medium">
              <img src='${views.context.package.thumbnailUrl(s.thumbnail)}' width="100" alt="${s.name}"/>
            </div>
            <div class="metadata">
                <div class="bd">
                    <h4 class="story"><a href="/${s.userName}/story/${s.id}">${s.name}</a></h4>
                    <span class="detail">${views.context.package.fullName(s.userName)}</span>
                    <span class="detail">${views.context.package.niceTime(s.TS_update)}</span>
                </div>
            </div>
        </div>
      #{/list}
    </div>
    #{/if}

</div>


