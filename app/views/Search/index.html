#{extends viewUtils.themeProperty('themeLayout') /}

#{set title:'Search results' /}

#{set 'moreCss'}
    <link rel="stylesheet" type="text/css" media="screen" href="@{'/public/themes/common/stylesheets/facets/facets.css'}"/>
#{/set}

#{set 'moreScripts'}
     <script src="@{'/public/themes/common/javascripts/results.js'}" type='text/javascript'></script>
#{/set}



#{breadcrumbs queryCrumbs: pagination /}

<div id="items">

    <div class="item-nav">
        <div class="mod item-count">
            ${viewUtils.getKey('search.nrfound', "${pagination.getNumFound()}")}
        </div>
    </div>

    <div class="row">
        <div class="g-8of12">

            <div class="buttons toolbar">
                #{if briefDocs.size() > 0}
                <div class="pager">#{pagination selector: ".pager", count: pagination.getNumFound(), start: pagination.getPageNumber() /}</div>
                #{/if}

                <div class="dropdown">
                    #{btnHref label: viewUtils.getKey('search.sortby'), toggle:true/}
                    <div class="dropdown-slider">
                        <a href="#" class="ddm"><span class="label">&{'thing.object'}</span></a>
                        <a href="#" class="ddm"><span class="label">&{'thing.collection'}</span></a>
                    </div>
                </div>

            </div>

            #{resultList results: briefDocs /}

            <div class="buttons toolbar">

                <!-- TODO: get result count and feed to pager -->
                #{if briefDocs.size() > 0}
                <div class="pager">#{pagination selector: ".pager", count: count, start: page /}</div>
                #{/if}

            </div>
        </div>
        <div class="g-3of12 prefix-1">

            <div class="mod facets">
                <div class="inner">
                    <div class="hd"><h5>&{'search.refineYourSearchBy'}:</h5></div>
                    <div class="bd">
                        #{facet facetMap: facets, type: "PROVIDER", typeKey: viewUtils.getKey('search.facet.byProvider'), qString: pagination.getPresentationQuery().getQueryForPresentation() /}
                        #{facet facetMap: facets, type: "COLLECTION", typeKey: viewUtils.getKey('search.facet.byCollection'), qString: pagination.getPresentationQuery().getQueryForPresentation() /}
                        #{facet facetMap: facets, type: "YEAR", typeKey: viewUtils.getKey('search.facet.byYear'), gClass:"g-1of3", qString: pagination.getPresentationQuery().getQueryForPresentation() /}
                        #{facet facetMap: facets, type: "TYPE", typeKey: viewUtils.getKey('search.facet.byObjectType'), qString: pagination.getPresentationQuery().getQueryForPresentation() /}
                    </div>
                </div>
            </div>
        </div>

    </div>

</div>