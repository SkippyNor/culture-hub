#{extends viewUtils.themeProperty('themeLayout') /}
#{set title: viewUtils.getKey('profile.title') + ': ' + userName /}

#{breadcrumbs /}

<h1 class="sep">&{'profile.title'}: <span>${user.fullname()}</span></h1>

<div class="dashboard pam">
    <div class="row">
        <div class="g-4of12 grid_5">
            <div class="info-box">
                <span class="label">&{'ui.label.username'}:</span><span class="text">${user.userName}</span>
                <span class="label">&{'ui.label.fullname'}:</span><span class="text">${user.fullname()}</span>
                <span class="label">&{'profile.activesince'}:</span><span class="text">${views.context.package.niceTime(user._id.getTime())}</span>
            </div>
        </div>
        <div class="g-6of12 grid_7">
            <div class="info-box long">
                <span class="label">&{'thing.objectcount'}:</span><span class="text"><a href="/${user.userName}/object"> ${objects.length()}</a></span>
                <span class="label">&{'thing.collectioncount'}:</span><span class="text"><a href="/${user.userName}/collection">${collections.length()}</a></span>
                <span class="label">&{'thing.storycount'}:</span><span class="text"><a href="/${user.userName}/story">${stories.length()}</a></span>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="g-1of3 grid_4">
            <div class="widget">
                <div class="hd"><h3>&{'thing.objects'}</h3></div>
                <div class="bd">
                    #{list objects, as: 'o'}
                    <div class="media">
                        <a href="/${o.userName}/object/${o.id}" class="clip"><img src='${views.context.package.thumbnailUrl(o.thumbnail, 80)}' width="80" class="img" alt="${o.title}"/></a>

                        <div class="bd">
                            <div class="metadata">
                                <span class="title"><a href="/${o.userName}/object/${o.id}" title="${o.title}">${o.title.shorten(50)}</a></span>
                            </div>
                        </div>
                    </div>
                    #{/list}
                </div>
            </div>
        </div>

        <div class="g-1of3 grid_4">
            <div class="widget">
                <div class="hd"><h3>&{'thing.collections'}</h3></div>
                <div class="bd">
                    #{list collections, as: 'c'}
                    <div class="media">
                        <a href="/${c.userName}/collections/${c.id}" class="clip"><img src='${views.context.package.thumbnailUrl(c.thumbnail, 80)}' width="80" class="img" alt="${c.title}"/></a>

                        <div class="bd">
                            <div class="metadata">
                                <span class="title"><a href="/${c.userName}/collection/${c.id}" title="${c.title}">${c.title.shorten(50)}</a></span>
                            </div>
                        </div>
                    </div>
                    #{/list}
                </div>
            </div>
        </div>

        <div class="g-1of3 grid_4">
            <div class="widget">
                <div class="hd"><h3>&{'thing.stories'}</h3></div>
                <div class="bd">
                    #{list stories: as: 's'}
                    <div class="media">
                        <a href="/${s.userName}/story/${s.id}" class="clip"><img src='${views.context.package.thumbnailUrl(s.thumbnail, 80)}' width="80" class="img" alt="${s.title}"/></a>

                        <div class="bd">
                            <div class="metadata">
                                <span class="title"><a href="/${s.userName}/story/${s.id}" title="${s.title}">${s.title.shorten(50)}</a></span>
                            </div>
                        </div>
                    </div>
                    #{/list}
                </div>
            </div>
        </div>
    </div>
</div>