<!--
  ~ Copyright 2011 Delving B.V.
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->
%{ def counter = 1 }%
#{list _results, as: 'doc'}
%{
def recordType = doc.getRecordType()
switch (recordType) {
case "object":
recordType = messages.get('thing.object')
break
case "collection":
recordType = messages.get('thing.collection')
break
case "story":
recordType = messages.get('thing.story')
break
case "mdr":
recordType = "Metadata record"
break
default:
recordType = doc.getRecordType()
}
}%
#{if counter == 1}
<div class="row">
    #{/if}
    <div class="g-1of3 #{if counter == 1} alpha #{/if} #{if counter == 3} omega #{/if} ">
        <div class="thing-container draggable ${doc.getRecordType()} ">
            <div class="ic_container">
                <a href="${doc.getIdUri()}" class="clip clip-220" title="${doc.getTitle()}">
                    <img src="${doc.getThumbnail(300) ? doc.getThumbnail(220) : '/public/images/dummy-object.png'}" width="200" class="img" alt="image: ${doc.getTitle()}"/>
                    <div class="overlay" style="display:none"></div>
                </a>
                <div class="ic_caption">
                    <p class="ic_category">${recordType}</p>
                    <span class="title"><a href="${doc.getIdUri()}" title="${doc.getTitle()}">${doc.getTitle().shorten(50)}</a></span>
                    <p class="ic_text info-box small">
                        #{if doc.getOwner()}<span class="label">&{'thing.owner'}: </span><span class="text" property="europeana:dataProvider" content="${doc.getOwner()}">${doc.getOwner()}</span>#{/if}
                        #{if doc.getDescription()}<span class="label">&{'metadata.dc.description'}: </span><span class="text" property="dc:description" content="${doc.getDescription()}">${doc.getDescription().shorten(70)}</span>#{/if}
                    </p>
                </div>
            </div>
            <input type="hidden" name="idUri" value="${doc.getIdUri()}"/>
            <input type="hidden" name="thumb" value="${doc.getThumbnail(100)}"/>
            <input type="hidden" name="title" value="${doc.getTitle()}"/>
        </div>
    </div>
    %{ counter++ }%
    #{if counter > 3 || doc_isLast }
</div>
<!-- end line -->
%{ counter = 1 }%
#{/if}
#{/list}
